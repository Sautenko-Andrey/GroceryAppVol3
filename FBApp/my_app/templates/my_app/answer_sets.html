{% extends 'my_app/base.html' %}
{% load static %}
{% block content %}
<br>
<br>
<div class="container">
    <div class="row">
        <div class="col-xl-12 col-md-12 col-sm-12" align="center">
            <div class="alert alert-info" role="alert">
                <h4><b>ВАШ ВЫБОР
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                         class="bi bi-cart" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                </b></h4>
            </div>
            <!--Accordion here-->
            <div class="accordion accordion-flush alert alert-info" id="accordionFlushExample" align="center"
                 role="alert">
                <div class="accordion-item alert-info" role="alert">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseOne" aria-expanded="false"
                                aria-controls="flush-collapseOne">
                            <b>Лучшие цены на товары в списке
                                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="currentColor"
                                     class="bi bi-currency-dollar" viewBox="0 0 16 16">
                                    <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                                </svg>
                            </b>
                        </button>
                    </h2>
                    <div id="flush-collapseOne" class="accordion-collapse collapse"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">{% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if ' 0 ' in value.20 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            <hr class="border border-primary border-2 opacity-50">
                            {% else %}
                            <h5 align="left">{{key}} : <b>{{value.20}} грн/кг/ед</b></h5>
                            <hr class="border border-primary border-2 opacity-50">

                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseTwo" aria-expanded="false"
                                aria-controls="flush-collapseTwo">
                            <b>Где Вам выгоднее скупиться
                                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="currentColor"
                                     class="bi bi-patch-question" viewBox="0 0 16 16">
                                    <path d="M8.05 9.6c.336 0 .504-.24.554-.627.04-.534.198-.815.847-1.26.673-.475 1.049-1.09 1.049-1.986 0-1.325-.92-2.227-2.262-2.227-1.02 0-1.792.492-2.1 1.29A1.71 1.71 0 0 0 6 5.48c0 .393.203.64.545.64.272 0 .455-.147.564-.51.158-.592.525-.915 1.074-.915.61 0 1.03.446 1.03 1.084 0 .563-.208.885-.822 1.325-.619.433-.926.914-.926 1.64v.111c0 .428.208.745.585.745z"/>
                                    <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"/>
                                    <path d="M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0z"/>
                                </svg>
                            </b>
                        </button>
                    </h2>
                    <div id="flush-collapseTwo" class="accordion-collapse collapse"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <h5 align="left">
                                <h5>--------------------------------------------------</h5>
                                <h5 align="left">Выгоднее всего будет скупить в ---> какой-то маркет</h5>
                                <h5 align="left">Скупившись по списку в АТБ Вы портатите: {{ATB_total}} грн</h5>
                                <!--<h5 align="left">Скупившись в ЭКО: {{EKO_total}} грн</h5>
                                <h5 align="left">Скупившись в Varus: {{VARUS_total}} грн</h5>
                                <h5 align="left">Скупившись в Сильпо: {{SILPO_total}} грн</h5>
                                <h5 align="left">Скупившись в Ашане: {{ASHAN_total}} грн</h5>
                                <h5 align="left">Скупившись в Novus: {{NOVUS_total}} грн</h5>
                                <h5 align="left">Скупившись в Metro: {{METRO_total}} грн</h5>
                                {% if NK_total == 0 %}
                                <h5 align="left">Наш Край: запрашиваемые продукты отсутствуют в магазине</h5>
                                {% else %}
                                <h5 align="left">Скупившись в Наш Край: {{NK_total}} грн</h5>
                                {% endif %}
                                <h5 align="left">Скупившись в Fozzy: {{FOZZY_total}} грн</h5>
                                <h5 align="left">--------------------------------------------------</h5>-->
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseThree" aria-expanded="false"
                                aria-controls="flush-collapseThree">
                            <b>Сводка по маркетам
                                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="currentColor"
                                     class="bi bi-shop" viewBox="0 0 16 16">
                                    <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"/>
                                </svg>
                            </b>
                        </button>
                    </h2>
                    <div id="flush-collapseThree" class="accordion-collapse collapse"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <!--for ATB-->
                            <!--new-->
                            <div class="card mb-3" style="max-width: 940px;">
                                <div class="row g-0">
                                    <div class="col-md-4">
                                        <img src="{% static 'my_app/images/ATB_BIG_LOGO.png' %}" class="img-fluid rounded-start" alt="АТБ">
                                    </div>
                                    <div class="col-md-8">
                                        <div class="card-body">
                                            <h5 class="card-title"><b>АТБ</b></h5>
                                            {% for product in products_set %}
                                            {% for key,value in product.items %}
                                            {% if value.10 == 0 %}
                                            <h5 class="card-text" align="left">{{key}} : нет в наличии</h5>
                                            {% else %}
                                            <h5 class="card-text" align="left">{{key}} : {{value.10}} грн</h5>
                                            {% endif %}
                                            {% endfor %}
                                            <hr class="border border-secondary border-1 opacity-25">
                                            {% endfor %}
                                            <h5 class="card-text" align="left"><b>Общая сумма : {{ATB_total}} грн</b></h5>
                                            <hr class="border border-primary border-2 opacity-50">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--end-->
                            <h5 align="left"><b>АТБ</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.10 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.10}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{ATB_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for EKO-->
                            <h5 align="left"><b>ЭКО</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.11 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.11}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{EKO_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Varus-->
                            <h5 align="left"><b>Varus</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.12 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.12}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{VARUS_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Silpo-->
                            <h5 align="left"><b>Сильпо</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.13 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.13}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{SILPO_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Ashan-->
                            <h5 align="left"><b>Ашан</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.14 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.14}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{ASHAN_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Novus-->
                            <h5 align="left"><b>Novus</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.15 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.15}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{NOVUS_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Metro-->
                            <h5 align="left"><b>Metro</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.16 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.16}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{METRO_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for NK-->
                            <h5 align="left"><b>Наш Край</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.17 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.17}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{NK_total}} грн</b></h5>
                            <br>
                            <!--end-->
                            <!--for Fozzy-->
                            <h5 align="left"><b>Fozzy</b></h5>
                            {% for product in products_set %}
                            {% for key,value in product.items %}
                            {% if value.18 == 0 %}
                            <h5 align="left">{{key}} : нет в наличии</h5>
                            {% else %}
                            <h5 align="left">{{key}} : {{value.18}} грн</h5>
                            {% endif %}
                            {% endfor %}
                            {% endfor %}
                            <h5 align="left"><b>Общая сумма : {{FOZZY_total}} грн</b></h5>
                            <br>
                            <!--end-->
                        </div>
                    </div>
                </div>
            </div>
            <!--end accordion-->
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        {% for product in products_set %}
        {% if products_set|length == 1 %}
        <div class="col-xl-12 col-md-12 col-sm-12" align="center">
            {% elif products_set|length == 2 %}
            <div class="col-xl-6 col-md-6 col-sm-6" align="center">
                {% elif products_set|length == 3 %}
                <div class="col-xl-4 col-md-4 col-sm-4" align="center">
                    {% elif products_set|length > 3 %}
                    <div class="col-xl-3 col-md-3 col-sm-3" align="center">
                        {% endif %}
                        <div class="card" style="width: 16rem;">
                            <div class="card-body">
                                {% for key,value in product.items %}
                                <h5 class="card-title"><b>{{key}}</b></h5>
                                <img src="{{value.19.picture.url}}" class="card-img-top" alt="Error">
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><b>Количество: {{value.0}}</b></li>
                                {% if value.1 %}
                                {% if value.10 == 0 %}
                                <li class="list-group-item out-of-stoke">АТБ: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">АТБ: {{value.10}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.2 %}
                                {% if value.11 == 0 %}
                                <li class="list-group-item out-of-stoke">ЭКО: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">ЭКО: {{value.11}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.3 %}
                                {% if value.12 == 0 %}
                                <li class="list-group-item out-of-stoke">Varus: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Varus: {{value.12}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.4 %}
                                {% if value.13 == 0 %}
                                <li class="list-group-item out-of-stoke">Сильпо: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Сильпо: {{value.13}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.5 %}
                                {% if value.14 == 0 %}
                                <li class="list-group-item out-of-stoke">Ашан: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Ашан: {{value.14}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.6 %}
                                {% if value.15 == 0 %}
                                <li class="list-group-item out-of-stoke">Novus: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Novus: {{value.15}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.7 %}
                                {% if value.16 == 0 %}
                                <li class="list-group-item out-of-stoke">Metro: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Metro: {{value.16}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.8 %}
                                {% if value.17 == 0 %}
                                <li class="list-group-item out-of-stoke">Наш Край: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Наш Край: {{value.17}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                {% if value.9 %}
                                {% if value.18 == 0 %}
                                <li class="list-group-item out-of-stoke">Fozzy: нет в наличии</li>
                                {% else %}
                                <li class="list-group-item black-red-style">Fozzy: {{value.18}} грн</li>
                                {% endif %}
                                {% else %}
                                {% endif %}
                                <!--определяем лучшую цену!-->
                                {% if value.1 or value.2 %}
                                <li class="list-group-item black-red-style"><b>Лучшая цена в {{value.20}} за кг/ед</b>
                                </li>
                                {% else %}
                                {% endif %}
                            </ul>
                            <br>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div class="container">
    <div class="row">
        <div class="col-xl-12 col-md-12 col-sm-12" align="center">
            <div class="alert alert-info" role="alert">
                <h5>Просмотрели цены? Нажмите, чтобы закончить работу с наборами
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         class="bi bi-fast-forward" viewBox="0 0 16 16">
                        <path d="M6.804 8 1 4.633v6.734L6.804 8Zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692Z"/>
                        <path d="M14.804 8 9 4.633v6.734L14.804 8Zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C8.713 12.69 8 12.345 8 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692Z"/>
                    </svg>
                    <a class="btn btn-outline-danger"
                       href="{% url 'thanks_set' %}"
                       role="button">ЗАВЕРШИТЬ</a>
                </h5>
            </div>
        </div>
    </div>
</div>


{% endblock %}